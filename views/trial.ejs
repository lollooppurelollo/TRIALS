<!-- views/trial.ejs -->

<div id="addStudyContainer" class="bg-white rounded-2xl shadow-xl p-8 mb-8">
    <h1 class="text-2xl font-bold mb-6 text-green-800">Gestione Studi Clinici</h1>
    <form id="studyForm" class="space-y-6">
        <h2 class="text-xl font-semibold text-gray-700">Aggiungi/Modifica Studio</h2>
        <input type="hidden" id="studyId">

        <div>
            <label for="studyTitle" class="block text-gray-700 font-semibold mb-2">Titolo dello Studio</label>
            <input type="text" id="studyTitle" name="title" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" required>
        </div>

        <div>
            <label for="studySubtitle" class="block text-gray-700 font-semibold mb-2">Sottotitolo (Riassunto)</label>
            <textarea id="studySubtitle" name="subtitle" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus-ring-green-500 focus:border-transparent transition-all duration-200" rows="3" required></textarea>
        </div>

        <div>
            <label for="studyClinicalAreas" class="block text-gray-700 font-semibold mb-2">Area Clinica di interesse (multiselezione)</label>
            <select id="studyClinicalAreas" name="clinical_areas" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" multiple required>
                <option value="Mammella">Mammella</option>
                <option value="Polmone">Polmone</option>
                <option value="Gastro-Intestinale">Gastro-Intestinale</option>
                <option value="Ginecologico">Ginecologico</option>
                <option value="Prostata e Vie Urinarie">Prostata e Vie Urinarie</option>
                <option value="Melanoma e Cute">Melanoma e Cute</option>
                <option value="Testa-Collo">Testa-Collo</option>
                <option value="Fase 1">Fase 1</option>
                <option value="Altro">Altro</option>
            </select>
        </div>

        <div id="studySpecificAreaContainer" class="hidden">
            <label for="studySpecificClinicalAreas" class="block text-gray-700 font-semibold mb-2">Specifica Area Clinica di interesse (multiselezione)</label>
            <select id="studySpecificClinicalAreas" name="specific_clinical_areas" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" multiple>
            </select>
        </div>

        <div>
            <label for="studyTreatmentSetting" class="block text-gray-700 font-semibold mb-2">Setting del Trattamento</label>
            <select id="studyTreatmentSetting" name="treatment_setting" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" required>
                <option value="" disabled selected>Seleziona un setting...</option>
                <option value="Metastatico">Metastatico</option>
                <option value="Adiuvante">Adiuvante</option>
                <option value="Neo-adiuvante">Neo-adiuvante</option>
            </select>
        </div>

        <div id="studyTreatmentLineContainer" class="hidden grid grid-cols-2 gap-4">
            <div>
                <label for="minTreatmentLine" class="block text-gray-700 font-semibold mb-2">Linea minima di Trattamento</label>
                <input type="number" id="minTreatmentLine" name="min_treatment_line" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" placeholder="Min.">
            </div>
            <div>
                <label for="maxTreatmentLine" class="block text-gray-700 font-semibold mb-2">Linea massima di Trattamento</label>
                <input type="number" id="maxTreatmentLine" name="max_treatment_line" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" placeholder="Max.">
            </div>
        </div>

        <h3 class="text-lg font-semibold mt-6 text-gray-700">Criteri di Inclusione/Esclusione</h3>
        <div id="criteriaList" class="space-y-4">
            <div class="flex items-center space-x-2">
                <input type="text" class="criteria-input w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" placeholder="Inserisci un criterio di inclusione">
                <select class="criteria-type p-3 border border-gray-300 rounded-lg w-32">
                    <option value="inclusion" selected>Inclusione</option>
                    <option value="exclusion">Esclusione</option>
                </select>
                <button type="button" class="remove-criteria-btn text-red-500 hover:text-red-700 text-xl">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        </div>
        <button type="button" id="addCriteriaBtn" class="w-full bg-gray-200 text-gray-700 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors duration-200 shadow-md">Aggiungi Criterio</button>

        <button type="submit" class="w-full bg-green-700 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-800 transition-colors duration-200 shadow-md">Salva Studio</button>
    </form>
</div>

<div class="bg-white rounded-2xl shadow-xl p-8">
    <h2 class="text-xl font-bold mb-4 text-green-800">Elenco Studi Attivi</h2>
    <div id="trialList" class="space-y-4">
        <!-- L'elenco degli studi verrÃ  caricato qui -->
    </div>
</div>
